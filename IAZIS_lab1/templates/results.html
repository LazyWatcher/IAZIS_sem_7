<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ - Boolean Search System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>üîç Boolean Search System</h1>
            <p>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞</p>
        </header>

        <nav class="tabs">
            <a href="/" class="tab">–ù–æ–≤—ã–π –ø–æ–∏—Å–∫</a>
            <a href="/evaluation" class="tab">–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞</a>
        </nav>

        <main>
            <div class="search-info">
                <h2>–ó–∞–ø—Ä–æ—Å: "{{ query }}"</h2>
                <div class="search-stats">
                    <p class="search-mode">
                        <strong>–û–ø–µ—Ä–∞—Ç–æ—Ä:</strong> {{ operator }}
                        {% if operator == 'AND' %}
                        <span class="operator-badge and">AND</span>
                        {% else %}
                        <span class="operator-badge or">OR</span>
                        {% endif %}
                    </p>
                    <p class="search-desc">
                        {% if operator == 'AND' %}
                        üìå –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å <strong>–≤—Å–µ</strong> —Å–ª–æ–≤–∞ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
                        {% else %}
                        üìå –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å <strong>—Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ</strong> —Å–ª–æ–≤–æ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
                        {% endif %}
                    </p>
                </div>
            </div>

            {% if error %}
            <div class="error-message">
                –û—à–∏–±–∫–∞: {{ error }}
            </div>
            {% endif %}

            <div class="results-section">
                {% if results %}
                    <div class="results-summary">
                        <p class="results-count">
                            –ù–∞–π–¥–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: <strong>{{ results|length }}</strong>
                            {% if total_docs %}
                            –∏–∑ {{ total_docs }} ({{ ((results|length / total_docs * 100)|round(1)) if total_docs > 0 else 0 }}%)
                            {% endif %}
                        </p>
                        <p class="results-sorted">
                            üìä –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–æ–≤–ø–∞–≤—à–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤
                        </p>
                    </div>

                    <div class="results-list">
                        {% for result in results %}
                        <div class="result-item">
                            <h3 class="result-title">
                                üìÑ {{ result.title }}
                                <span class="doc-id">(ID: {{ result.id }})</span>
                                <span class="file-type-badge {{ result.file_type }}">{{ result.file_type }}</span>
                                <span class="relevance-badge" title="–°–æ–≤–ø–∞–ª–æ —Ç–µ—Ä–º–∏–Ω–æ–≤: {{ result.score }}">
                                    üî• {{ result.score }}
                                </span>
                            </h3>
                            <div class="result-snippet">
                                {{ result.highlighted_snippet|safe }}
                            </div>
                            <div class="result-meta">
                                <div class="matched-terms">
                                    <span class="matched-label">–°–æ–≤–ø–∞–≤—à–∏–µ —Ç–µ—Ä–º–∏–Ω—ã:</span>
                                    {% for term in result.matched_terms %}
                                        <span class="term-tag">{{ term }}</span>
                                    {% endfor %}
                                </div>
                                <div class="result-stats">
                                    <span class="stat-item">–û–ø–µ—Ä–∞—Ç–æ—Ä: {{ result.operator }}</span>
                                    {% if result.score > 0 %}
                                    <span class="stat-item">–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: {{ result.score }} –∏–∑ {{ query.split()|length }}</span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="no-results">
                        <div class="no-results-icon">üîç</div>
                        <p>–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
                        <div class="suggestions">
                            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ:</p>
                            <ul>
                                {% if operator == 'AND' %}
                                <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä <strong>OR</strong> –¥–ª—è –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞</li>
                                <li>–£–ø—Ä–æ—Å—Ç–∏—Ç—å –∑–∞–ø—Ä–æ—Å, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ–Ω—å—à–µ —Å–ª–æ–≤</li>
                                {% else %}
                                <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä <strong>AND</strong> –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞</li>
                                <li>–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</li>
                                {% endif %}
                                <li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å–ª–æ–≤</li>
                                <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤</li>
                            </ul>
                        </div>
                        <div class="quick-tips">
                            <h4>üéØ –ë—ã—Å—Ç—Ä—ã–µ —Å–æ–≤–µ—Ç—ã:</h4>
                            <p>AND: "machine learning" ‚Üí –Ω–∞–π–¥–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å –û–ë–û–ò–ú–ò —Å–ª–æ–≤–∞–º–∏</p>
                            <p>OR: "python java" ‚Üí –Ω–∞–π–¥–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å –õ–Æ–ë–´–ú –∏–∑ —ç—Ç–∏—Ö —Å–ª–æ–≤</p>
                        </div>
                    </div>
                {% endif %}
            </div>
        </main>
    </div>
</body>
</html>